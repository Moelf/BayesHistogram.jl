using BayesHistogram, Test, Random

@testset "basic test BayesHistogram" begin
    x = randn(Xoshiro(1337), 5000)

    ref = [
        -3.704058531618975,
        -2.778065586707626,
        -2.133218533025471,
        -1.6480386516207801,
        -1.3140645798864168,
        -0.8575881683262867,
        -0.644610676860989,
        0.463534347245104,
        0.9542073946864447,
        1.2602857648643435,
        1.6456367564614374,
        1.9376034682498504,
        2.4043125317739733,
        2.932943071805272,
        3.590507153644763,
    ]
    @test all(bayesian_blocks(x, resolution=100.0, min_counts=2).edges .≈ ref)

    ref = [
        -3.704058531618975,
        -2.9198150710603223,
        -2.133218533025471,
        -1.3689581844499061,
        -0.6343551258945501,
        0.4495602463983795,
        1.1802613850539956,
        1.9231398688395287,
        2.6556538491763684,
        3.590507153644763,
    ]
    @test all(bayesian_blocks(x, resolution=10.0, min_counts=2).edges .≈ ref)
end

